"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const host_js_1 = __importDefault(require("../utils/host.js"));
const Path_js_1 = __importDefault(require("../utils/Path.js"));
function useOffLicense(_type) {
    return { url, key };
}
exports.default = useOffLicense;
function key(stowage) {
    let rv = Path_js_1.default.root.join(stowage.pkg.project);
    if (stowage.type == 'bottle') {
        const { platform, arch } = stowage.host ?? (0, host_js_1.default)();
        rv = rv.join(`${platform}/${arch}`);
    }
    let fn = `v${stowage.pkg.version}`;
    if (stowage.type == 'bottle') {
        fn += `.tar.${stowage.compression}`;
    }
    else {
        fn += stowage.extname;
    }
    return rv.join(fn).string.slice(1);
}
function url(stowage) {
    return new URL(`https://dist.tea.xyz/${key(stowage)}`);
}
